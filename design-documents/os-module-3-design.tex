
\chapter{Design of Module \textit{virtualmemory}}


\section{Initial Functionality}

Describe briefly what you have been given (have started from) at the beginning of the assignment and the way the existing functionality must be extended.

\section{Data Structures and Functions}

Specify the \textit{data structures} and \textit{functions} involved in your solution and what are they used for. Describe in few words the purpose of new added data structures, fields and functions. 

\begin{lstlisting}
	struct existent_data_structure {
		int newField;
	};
	
	struct newDataStructure {
	};
	
	int newFunction();
\end{lstlisting}


\section{Functionality}

Describe \textbf{briefly}, still \textbf{explicitly}, in words and pseudocode the way your solution works. DO NOT INCLUDE detailed code. 

Give examples, if you think they can make your explanation clearer. You are free to use any other techniques (e.g. use-case diagrams, sequence diagrams etc.) that you think can make your explanation clearer. 


\section{Design Decisions}

Justify your design decisions, specify other design alternatives, their advantages and disadvantages and mention the reasons of your choice.  

\section{Tests}

Describe briefly the tests you are intended to run in order to test the functionality of your implementation.

\section{Observations}

You can use this section to mention other things not mentioned in the other sections. 

You can indicate and evaluate, for instance:
\begin{itemize}
	\item the most difficult parts of your assignment and the reasons you think they were so; 
	
	\item the difficulty level of the assignment and if the allocated time was enough or not; 

	\item particular facts or hints you think we should give students to help them solve better the assignment.

\end{itemize}

You can also make suggestions for teacher, relative to the way he can assist more effectively the students.

\section{Memory Mapped Files}
\subsection{Initial Functionality}

We have open/read/write file syscalls. We know for each process its table of opened files.


\subsection{Data Structures and Functions}

We need the following data structures and functions for managing memory mapped files: 

\begin{lstlisting}
	struct process_t {
		list mmap_list;
	};

	typedef int mapid_t;
	struct mapped_file {
		mapid_t id;
		int fd;
		void *unused; //optional
		enum mapped_file_status status; //optional
		struct list_elem lst;
	};	
\end{lstlisting}
	static void syscall_mmap(struct intr_frame *f);
	static void syscall_mumap(struct intr_frame *f);
	


\subsection{Functionality}



\subsection{Design Decisions}

Justify your design decisions, specify other design alternatives, their advantages and disadvantages and mention the reasons of your choice.  

\subsection{Tests}

Describe briefly the tests you are intended to run in order to test the functionality of your implementation.

\subsection{Observations}

You can use this section to mention other things not mentioned in the other sections. 

You can indicate and evaluate, for instance:
\begin{itemize}
	\item the most difficult parts of your assignment and the reasons you think they were so; 
	
	\item the difficulty level of the assignment and if the allocated time was enough or not; 

	\item particular facts or hints you think we should give students to help them solve better the assignment.

\end{itemize}

You can also make suggestions for teacher, relative to the way he can assist more effectively the students.